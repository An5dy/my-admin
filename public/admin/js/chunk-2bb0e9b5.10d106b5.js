(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2bb0e9b5"],{5088:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[n("table-tool",{attrs:{"search-columns":e.searchColumns,"add-able":e.addAble,"export-able":!0},on:{"on-search":e.handleSearch,"on-reset":e.handleReset,"on-add":e.handleAdd}}),n("el-table",{attrs:{data:e.list,fit:"",size:"medium"}},[n("el-table-column",{attrs:{prop:"id",label:"序号",width:"100px"}}),n("el-table-column",{attrs:{prop:"name",label:"标识"}}),n("el-table-column",{attrs:{prop:"display_name",label:"名称"}}),n("el-table-column",{attrs:{prop:"permissions",label:"权限","show-overflow-tooltip":!0,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.permissions,function(t,a){return n("el-tag",{key:a,staticStyle:{"margin-right":"2px"},attrs:{type:"primary",size:"mini","disable-transitions":""}},[e._v(e._s(t.display_name))])})}}])}),n("el-table-column",{attrs:{prop:"created_at",label:"创建时间"}}),n("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.showAble?n("el-button",{attrs:{size:"mini"},nativeOn:{click:function(n){return e.handleShow(t.row)}}},[e._v("查看")]):e._e(),e.editAble?n("el-button",{attrs:{type:"primary",size:"mini"},nativeOn:{click:function(n){return e.handleEdit(t.row)}}},[e._v("编辑")]):e._e(),e.deleteAble?n("el-popover",{ref:"delete-"+t.row.id,attrs:{placement:"top"}},[n("p",[e._v("确定删除吗？")]),n("el-button",{attrs:{size:"mini"},on:{click:function(n){return e.cancleDelete(t.row.id)}}},[e._v("取消")]),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(n){return e.handleDelete(t.row.id)}}},[e._v("确认")]),n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{slot:"reference",type:"danger",size:"mini"},slot:"reference"},[e._v("删除")])],1):e._e()]}}])})],1),e.total>0?n("app-pagination",{attrs:{total:e.total,page:e.query.page,limit:e.query.limit},on:{"update:page":function(t){return e.$set(e.query,"page",t)},"update:limit":function(t){return e.$set(e.query,"limit",t)},pagination:e.handleGet}}):e._e()],1),n("el-dialog",{attrs:{visible:e.dialogVisible,title:e.dialogTitle+"角色","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialogVisible=t},closed:e.handleClosed}},[n("el-form",{ref:"dataForm",attrs:{rules:e.formRules,model:e.formData,"label-width":"80px","label-position":"right"}},[n("el-form-item",{attrs:{label:"角色名称",prop:"display_name"}},[n("el-col",{attrs:{span:20}},[n("el-input",{attrs:{autocomplete:"off",placeholder:"请输入角色名称"},model:{value:e.formData.display_name,callback:function(t){e.$set(e.formData,"display_name",t)},expression:"formData.display_name"}})],1)],1),n("el-form-item",{attrs:{label:"角色标识",prop:"name"}},[n("el-col",{attrs:{span:20}},[n("el-input",{attrs:{autocomplete:"off",placeholder:"请输入角色标识"},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1)],1),n("el-form-item",{attrs:{label:"权限",prop:"permissions"}},[n("el-col",{attrs:{span:20}},[n("transfer",{attrs:{filterable:"",data:e.allPermissions,titles:["权限","已选权限"]},model:{value:e.formData.permissions,callback:function(t){e.$set(e.formData,"permissions",t)},expression:"formData.permissions"}})],1)],1)],1),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{nativeOn:{click:function(t){return e.handleCancle(t)}}},[e._v("取 消")]),e.isEdit?n("el-button",{attrs:{type:"primary",loading:e.storeLoading},on:{click:e.handleUpdate}},[e._v("确 定")]):n("el-button",{attrs:{type:"primary",loading:e.storeLoading},on:{click:e.handleStore}},[e._v("确 定")])],1)],1),n("el-dialog",{ref:"dataShow",attrs:{visible:e.showVisible,title:"角色详情"},on:{"update:visible":function(t){e.showVisible=t}}},[n("el-form",{attrs:{"label-width":"80px","label-position":"right"}},[n("el-form-item",{attrs:{label:"角色名称:",prop:"display_name"}},[e._v("\n        "+e._s(e.item.display_name)+"\n      ")]),n("el-form-item",{attrs:{label:"角色标识:",prop:"display_name"}},[e._v("\n        "+e._s(e.item.name)+"\n      ")]),n("el-form-item",{attrs:{label:"权限:",prop:"display_name"}},e._l(e.item.permissions,function(t,a){return n("el-tag",{key:a,staticStyle:{"margin-right":"10px"},attrs:{type:"primary","disable-transitions":""}},[e._v(e._s(t.display_name))])}),1)],1)],1)],1)},r=[],i=(n("77ad"),n("0c32")),o=(n("97fe"),n("1b55"),n("a96b")),l=n.n(o),s=(n("4b77"),n("8b39")),c=n.n(s),u=(n("6922"),n("5d26")),d=n("e21d"),f=n("08cd"),h=n("ec4b"),p=n("6a3c"),m=n("6e1a"),b=n("47ad"),g=n("ffc6"),y=n("24b2"),v=n("aef3"),_=n("e3e1"),k=n("0dd3"),C=n("c595"),x={data:function(){return{item:{},showVisible:!1}},methods:{handleShow:function(e){this.item=e,this.showVisible=!0}}},w=n("292c"),O=Object(f["a"])("role"),P=O.mapState,D=O.mapGetters,$=O.mapActions,S={name:"Role",data:function(){return{query:{page:1,limit:20},searchColumns:[{title:"角色标识",name:"name"},{title:"角色名称",name:"display_name"}],formRules:{name:[{required:!0,message:"请填写角色标识",trigger:"blur"}],display_name:[{required:!0,message:"请填写角色名称",trigger:"blur"}],permissions:[{required:!0,message:"请选择权限",trigger:"blur"}]},formData:{id:0,name:"",display_name:"",permissions:[]},isEdit:!1,allPermissions:[]}},beforeRouteEnter:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(t,n,a){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d["a"].dispatch("role/get");case 3:return e.next=5,d["a"].dispatch("permission/all");case 5:r=e.sent,a(function(e){e.setPermissions(r.data)}),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),c.a.error(e.t0.response.data.message);case 12:case"end":return e.stop()}},e,null,[[0,9]])}));function t(t,n,a){return e.apply(this,arguments)}return t}(),components:{TableTool:h["a"],AppPagination:p["a"],Transfer:l.a},mixins:[m["a"],b["a"],g["a"],y["a"],v["a"],k["a"],k["a"],_["a"],C["a"],x],methods:Object(i["a"])({},$(["get","store","delete","update"]),{setPermissions:function(e){this.allPermissions=e},handleEdit:function(e){this.formData.id=e.id,this.formData.name=e.name,this.formData.display_name=e.display_name,this.formData.permissions=e.permissions.map(function(e){return e.id}),this.dialogTitle="编辑",this.dialogVisible=!0,this.isEdit=!0}}),computed:Object(i["a"])({},P({list:function(e){return e.list}}),D(["total"]),{showAble:function(){return Object(w["a"])("roles-show")},addAble:function(){return Object(w["a"])("roles-create")},editAble:function(){return Object(w["a"])("roles-edit")},deleteAble:function(){return Object(w["a"])("roles-destroy")}}),mounted:function(){this.query={page:1,limit:20}}},T=S,j=n("157b"),E=Object(j["a"])(T,a,r,!1,null,"1420322f",null);t["default"]=E.exports},"97fe":function(e,t,n){},a96b:function(e,t,n){e.exports=function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=55)}({0:function(e,t,n){"use strict";function a(e,t,n,a,r,i,o,l){var s,c="function"===typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=n,c._compiled=!0),a&&(c.functional=!0),i&&(c._scopeId="data-v-"+i),o?(s=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},c._ssrRegister=s):r&&(s=l?function(){r.call(this,this.$root.$options.shadowRoot)}:r),s)if(c.functional){c._injectStyles=s;var u=c.render;c.render=function(e,t){return s.call(t),u(e,t)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,s):[s]}return{exports:e,options:c}}n.d(t,"a",function(){return a})},10:function(e,t){e.exports=n("f220")},16:function(e,t){e.exports=n("1d9c")},17:function(e,t){e.exports=n("7d57")},3:function(e,t){e.exports=n("e3dd")},35:function(e,t){e.exports=n("d89c")},55:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-transfer"},[n("transfer-panel",e._b({ref:"leftPanel",attrs:{data:e.sourceData,title:e.titles[0]||e.t("el.transfer.titles.0"),"default-checked":e.leftDefaultChecked,placeholder:e.filterPlaceholder||e.t("el.transfer.filterPlaceholder")},on:{"checked-change":e.onSourceCheckedChange}},"transfer-panel",e.$props,!1),[e._t("left-footer")],2),n("div",{staticClass:"el-transfer__buttons"},[n("el-button",{class:["el-transfer__button",e.hasButtonTexts?"is-with-texts":""],attrs:{type:"primary",disabled:0===e.rightChecked.length},nativeOn:{click:function(t){return e.addToLeft(t)}}},[n("i",{staticClass:"el-icon-arrow-left"}),void 0!==e.buttonTexts[0]?n("span",[e._v(e._s(e.buttonTexts[0]))]):e._e()]),n("el-button",{class:["el-transfer__button",e.hasButtonTexts?"is-with-texts":""],attrs:{type:"primary",disabled:0===e.leftChecked.length},nativeOn:{click:function(t){return e.addToRight(t)}}},[void 0!==e.buttonTexts[1]?n("span",[e._v(e._s(e.buttonTexts[1]))]):e._e(),n("i",{staticClass:"el-icon-arrow-right"})])],1),n("transfer-panel",e._b({ref:"rightPanel",attrs:{data:e.targetData,title:e.titles[1]||e.t("el.transfer.titles.1"),"default-checked":e.rightDefaultChecked,placeholder:e.filterPlaceholder||e.t("el.transfer.filterPlaceholder")},on:{"checked-change":e.onTargetCheckedChange}},"transfer-panel",e.$props,!1),[e._t("right-footer")],2)],1)},r=[];a._withStripped=!0;var i=n(16),o=n.n(i),l=n(3),s=n.n(l),c=n(7),u=n.n(c),d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-transfer-panel"},[n("p",{staticClass:"el-transfer-panel__header"},[n("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleAllCheckedChange},model:{value:e.allChecked,callback:function(t){e.allChecked=t},expression:"allChecked"}},[e._v("\n      "+e._s(e.title)+"\n      "),n("span",[e._v(e._s(e.checkedSummary))])])],1),n("div",{class:["el-transfer-panel__body",e.hasFooter?"is-with-footer":""]},[e.filterable?n("el-input",{staticClass:"el-transfer-panel__filter",attrs:{size:"small",placeholder:e.placeholder},nativeOn:{mouseenter:function(t){e.inputHover=!0},mouseleave:function(t){e.inputHover=!1}},model:{value:e.query,callback:function(t){e.query=t},expression:"query"}},[n("i",{class:["el-input__icon","el-icon-"+e.inputIcon],attrs:{slot:"prefix"},on:{click:e.clearQuery},slot:"prefix"})]):e._e(),n("el-checkbox-group",{directives:[{name:"show",rawName:"v-show",value:!e.hasNoMatch&&e.data.length>0,expression:"!hasNoMatch && data.length > 0"}],staticClass:"el-transfer-panel__list",class:{"is-filterable":e.filterable},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},e._l(e.filteredData,function(t){return n("el-checkbox",{key:t[e.keyProp],staticClass:"el-transfer-panel__item",attrs:{label:t[e.keyProp],disabled:t[e.disabledProp]}},[n("option-content",{attrs:{option:t}})],1)}),1),n("p",{directives:[{name:"show",rawName:"v-show",value:e.hasNoMatch,expression:"hasNoMatch"}],staticClass:"el-transfer-panel__empty"},[e._v(e._s(e.t("el.transfer.noMatch")))]),n("p",{directives:[{name:"show",rawName:"v-show",value:0===e.data.length&&!e.hasNoMatch,expression:"data.length === 0 && !hasNoMatch"}],staticClass:"el-transfer-panel__empty"},[e._v(e._s(e.t("el.transfer.noData")))])],1),e.hasFooter?n("p",{staticClass:"el-transfer-panel__footer"},[e._t("default")],2):e._e()])},f=[];d._withStripped=!0;var h=n(35),p=n.n(h),m=n(17),b=n.n(m),g=n(9),y=n.n(g),v={mixins:[u.a],name:"ElTransferPanel",componentName:"ElTransferPanel",components:{ElCheckboxGroup:p.a,ElCheckbox:b.a,ElInput:y.a,OptionContent:{props:{option:Object},render:function(e){var t=function e(t){return"ElTransferPanel"===t.$options.componentName?t:t.$parent?e(t.$parent):t},n=t(this),a=n.$parent||n;return n.renderContent?n.renderContent(e,this.option):a.$scopedSlots.default?a.$scopedSlots.default({option:this.option}):e("span",[this.option[n.labelProp]||this.option[n.keyProp]])}}},props:{data:{type:Array,default:function(){return[]}},renderContent:Function,placeholder:String,title:String,filterable:Boolean,format:Object,filterMethod:Function,defaultChecked:Array,props:Object},data:function(){return{checked:[],allChecked:!1,query:"",inputHover:!1,checkChangeByUser:!0}},watch:{checked:function(e,t){if(this.updateAllChecked(),this.checkChangeByUser){var n=e.concat(t).filter(function(n){return-1===e.indexOf(n)||-1===t.indexOf(n)});this.$emit("checked-change",e,n)}else this.$emit("checked-change",e),this.checkChangeByUser=!0},data:function(){var e=this,t=[],n=this.filteredData.map(function(t){return t[e.keyProp]});this.checked.forEach(function(e){n.indexOf(e)>-1&&t.push(e)}),this.checkChangeByUser=!1,this.checked=t},checkableData:function(){this.updateAllChecked()},defaultChecked:{immediate:!0,handler:function(e,t){var n=this;if(!t||e.length!==t.length||!e.every(function(e){return t.indexOf(e)>-1})){var a=[],r=this.checkableData.map(function(e){return e[n.keyProp]});e.forEach(function(e){r.indexOf(e)>-1&&a.push(e)}),this.checkChangeByUser=!1,this.checked=a}}}},computed:{filteredData:function(){var e=this;return this.data.filter(function(t){if("function"===typeof e.filterMethod)return e.filterMethod(e.query,t);var n=t[e.labelProp]||t[e.keyProp].toString();return n.toLowerCase().indexOf(e.query.toLowerCase())>-1})},checkableData:function(){var e=this;return this.filteredData.filter(function(t){return!t[e.disabledProp]})},checkedSummary:function(){var e=this.checked.length,t=this.data.length,n=this.format,a=n.noChecked,r=n.hasChecked;return a&&r?e>0?r.replace(/\${checked}/g,e).replace(/\${total}/g,t):a.replace(/\${total}/g,t):e+"/"+t},isIndeterminate:function(){var e=this.checked.length;return e>0&&e<this.checkableData.length},hasNoMatch:function(){return this.query.length>0&&0===this.filteredData.length},inputIcon:function(){return this.query.length>0&&this.inputHover?"circle-close":"search"},labelProp:function(){return this.props.label||"label"},keyProp:function(){return this.props.key||"key"},disabledProp:function(){return this.props.disabled||"disabled"},hasFooter:function(){return!!this.$slots.default}},methods:{updateAllChecked:function(){var e=this,t=this.checkableData.map(function(t){return t[e.keyProp]});this.allChecked=t.length>0&&t.every(function(t){return e.checked.indexOf(t)>-1})},handleAllCheckedChange:function(e){var t=this;this.checked=e?this.checkableData.map(function(e){return e[t.keyProp]}):[]},clearQuery:function(){"circle-close"===this.inputIcon&&(this.query="")}}},_=v,k=n(0),C=Object(k["a"])(_,d,f,!1,null,null,null);C.options.__file="packages/transfer/src/transfer-panel.vue";var x=C.exports,w=n(10),O=n.n(w),P={name:"ElTransfer",mixins:[s.a,u.a,O.a],components:{TransferPanel:x,ElButton:o.a},props:{data:{type:Array,default:function(){return[]}},titles:{type:Array,default:function(){return[]}},buttonTexts:{type:Array,default:function(){return[]}},filterPlaceholder:{type:String,default:""},filterMethod:Function,leftDefaultChecked:{type:Array,default:function(){return[]}},rightDefaultChecked:{type:Array,default:function(){return[]}},renderContent:Function,value:{type:Array,default:function(){return[]}},format:{type:Object,default:function(){return{}}},filterable:Boolean,props:{type:Object,default:function(){return{label:"label",key:"key",disabled:"disabled"}}},targetOrder:{type:String,default:"original"}},data:function(){return{leftChecked:[],rightChecked:[]}},computed:{dataObj:function(){var e=this.props.key;return this.data.reduce(function(t,n){return(t[n[e]]=n)&&t},{})},sourceData:function(){var e=this;return this.data.filter(function(t){return-1===e.value.indexOf(t[e.props.key])})},targetData:function(){var e=this;return"original"===this.targetOrder?this.data.filter(function(t){return e.value.indexOf(t[e.props.key])>-1}):this.value.reduce(function(t,n){var a=e.dataObj[n];return a&&t.push(a),t},[])},hasButtonTexts:function(){return 2===this.buttonTexts.length}},watch:{value:function(e){this.dispatch("ElFormItem","el.form.change",e)}},methods:{getMigratingConfig:function(){return{props:{"footer-format":"footer-format is renamed to format."}}},onSourceCheckedChange:function(e,t){this.leftChecked=e,void 0!==t&&this.$emit("left-check-change",e,t)},onTargetCheckedChange:function(e,t){this.rightChecked=e,void 0!==t&&this.$emit("right-check-change",e,t)},addToLeft:function(){var e=this.value.slice();this.rightChecked.forEach(function(t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}),this.$emit("input",e),this.$emit("change",e,"left",this.rightChecked)},addToRight:function(){var e=this,t=this.value.slice(),n=[],a=this.props.key;this.data.forEach(function(t){var r=t[a];e.leftChecked.indexOf(r)>-1&&-1===e.value.indexOf(r)&&n.push(r)}),t="unshift"===this.targetOrder?n.concat(t):t.concat(n),this.$emit("input",t),this.$emit("change",t,"right",this.leftChecked)},clearQuery:function(e){"left"===e?this.$refs.leftPanel.query="":"right"===e&&(this.$refs.rightPanel.query="")}}},D=P,$=Object(k["a"])(D,a,r,!1,null,null,null);$.options.__file="packages/transfer/src/main.vue";var S=$.exports;S.install=function(e){e.component(S.name,S)};t["default"]=S},7:function(e,t){e.exports=n("e7e3")},9:function(e,t){e.exports=n("6522")}})}}]);
//# sourceMappingURL=chunk-2bb0e9b5.10d106b5.js.map